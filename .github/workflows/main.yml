name: Gladiator_Shield_V18_Final_Fix
on: [workflow_dispatch, push]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-java@v4
        with:
          java-version: '17'
          distribution: 'temurin'
      - name: Build_Clean
        run: |
          mkdir -p app/src/main/java/com/gladiator/shield app/src/main/res/layout app/src/main/res/drawable
          # V22 UI inside the guaranteed V18 structure
          echo "<RelativeLayout xmlns:android='http://schemas.android.com/apk/res/android' android:layout_width='match_parent' android:layout_height='match_parent' android:background='#000000'><TextView android:layout_width='wrap_content' android:layout_height='wrap_content' android:text='GLADIATOR V22' android:textColor='#D4AF37' android:layout_centerInParent='true' android:textSize='30sp' android:textStyle='bold'/></RelativeLayout>" > app/src/main/res/layout/activity_main.xml
          # Core logic
          echo "package com.gladiator.shield; import android.app.Activity; import android.os.Bundle; public class MainActivity extends Activity { protected void onCreate(Bundle s) { super.onCreate(s); setContentView(R.layout.activity_main); } }" > app/src/main/java/com/gladiator/shield/MainActivity.java
          # Android Manifest
          echo "<manifest xmlns:android='http://schemas.android.com/apk/res/android' package='com.gladiator.shield'><application android:label='Gladiator V22'><activity android:name='.MainActivity' android:exported='true'><intent-filter><action android:name='android.intent.action.MAIN'/><category android:name='android.intent.category.LAUNCHER'/></intent-filter></activity></application></manifest>" > app/src/main/AndroidManifest.xml
          # Gradle settings - Version 22 for installation fix
          echo "include ':app'" > settings.gradle
          echo "apply plugin: 'com.android.application'" > app/build.gradle
          echo "android { namespace 'com.gladiator.shield' " >> app/build.gradle
          echo "compileSdk 33 " >> app/build.gradle
          echo "defaultConfig { applicationId 'com.gladiator.shield' " >> app/build.gradle
          echo "minSdk 21 " >> app/build.gradle
          echo "targetSdk 33 " >> app/build.gradle
          echo "versionCode 22 " >> app/build.gradle
          echo "versionName '22.0' } }" >> app/build.gradle
          gradle :app:assembleDebug --no-daemon
      - uses: actions/upload-artifact@v4
        with:
          name: Gladiator-V22-Final-APK
          path: app/build/outputs/apk/debug/*.apk
